<ion-header>
  <header [title]="'Quản lý khu'">
    <!-- <ion-toolbar showWhen="core">
      <ion-row>
        <ion-col col-xl-2 col-lg-2 col-md-3 col-sm-6 col-4 showWhen="core">
          <button ion-item style="background: transparent!important">Vĩnh Tân 1
            <ion-icon name="ios-arrow-down" style="vertical-align: bottom"></ion-icon>
          </button>
        </ion-col>
        <ion-col>
          <button ion-button mode='ios' color="secondary" (tap)="addNewFarm()">Thêm khu</button>
        </ion-col>
      </ion-row>
    </ion-toolbar> -->
    <ion-toolbar showWhen="core" toolbar-transparent>
      <ion-row>
        <ion-col showWhen="core">
          <input-select class="input-select" [value]="farm_init" [placeholder]="'Chọn trang trại'"
            [(data)]="farms_select" (changeValue)="changeFarm($event)">
          </input-select>
        </ion-col>
        <ion-col text-right>
          <button ion-button mode='ios' color="secondary" (tap)="addNewFarm()">Thêm khu</button>
        </ion-col>
      </ion-row>
    </ion-toolbar>
  </header>
</ion-header>

<ion-content no-padding>
  <ion-item-group>
    <ion-item-divider sticky="true">Danh sách khu</ion-item-divider>
    <ion-list no-lines>
      <ion-item-sliding *ngFor="let section of sections" (click)="activeItem(section)">
        <ion-item [attr.active]="section.active?'':null">
          <ion-icon fixed item-start name="app-section-single" color="danger"></ion-icon>
          <ion-row>
            <h2>{{section.name}}</h2>
          </ion-row>
          <expandable [expanded]="section.expand">
            <div>
              <!-- <p>{{convertDate(section.founding)}}</p> -->
              <p>{{section.description}}</p>
            </div>
            <ion-list no-lines>
              <button item-end ion-item (tap)="viewDetail(section)">
                <ion-icon name="ios-information-circle" style="vertical-align: sub" font28></ion-icon>
                Xem thông tin khu
              </button>
              <ion-list-header custom-list-header [attr.active_header]="section.active?'':null">
                <div showWhen='ios,android'>Danh sách nhà</div>
                <ion-row showWhen="core">
                  <ion-title ion-text font15 color="dark">Danh sách nhà</ion-title>
                  <button ion-button item-end mode='ios' color="secondary" (tap)="addNewHouse(section)">Thêm
                    nhà</button>
                </ion-row>
              </ion-list-header>
              <button item-end ion-item *ngFor="let house of section.houses" (tap)="viewHouse(item)">
                <ion-avatar item-start>
                  <ion-icon name="ios-home" style="vertical-align: bottom" font28></ion-icon>
                </ion-avatar>
                <h2>{{house.name}}</h2>
                <ion-row>
                  <ion-col>
                    <p><b>Loại nhà:</b> {{house.typeId}}</p>
                  </ion-col>
                  <ion-col>
                    <p><b>Số nhà:</b> {{house.houseCode}}</p>
                  </ion-col>
                  <ion-col>
                    <p><b>Mô tả:</b> {{house.description}}</p>
                  </ion-col>
                  <ion-col>
                    <p><b>Ngày thành lập:</b> {{house.founding|date:'dd/MM/yyyy'}}</p>
                  </ion-col>
                </ion-row>
              </button>
              <ion-toolbar showWhen="ios,android" toolbar-transparent>
                <ion-buttons item-start>
                  <button ion-button mode='ios' block color="secondary" (tap)="addNewHouse(section)">
                    <ion-icon name='md-add-circle' padding></ion-icon>
                    Thêm nhà
                  </button>
                </ion-buttons>
              </ion-toolbar>
            </ion-list>
          </expandable>
        </ion-item>
        <!-- <ion-item-options side="right">
          <button ion-button color="primary-custome">Xem chi tiết</button>
          <button ion-button color="danger">Xóa</button>
        </ion-item-options> -->
      </ion-item-sliding>
    </ion-list>
  </ion-item-group>
</ion-content>